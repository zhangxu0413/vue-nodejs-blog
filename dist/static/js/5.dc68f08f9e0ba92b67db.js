webpackJsonp([5],{XHq3:function(t,a,s){"use strict";var e=s("yt7g"),n={name:"allArticle",props:["passages","type"],data:function(){return{lazyLoad:""}},created:function(){console.log(this.passages)},mounted:function(){this.lazyLoad=e.a.throttle(this.handleLoad,200,300),window.addEventListener("scroll",this.lazyLoad)},beforeDestroy:function(){window.removeEventListener("scroll",this.lazyLoad)},methods:{findCate:function(t){return console.log(e.a.getCategoryById(t)),e.a.getCategoryById(t).name},findTag:function(t){this.$router.push({name:"searchTag",params:{tagStr:t}})},handleLoad:function(){for(var t=document.getElementsByClassName("rightContent")[0].getElementsByTagName("img"),a=0,s=t.length;a<s;a++)this.isInsight(t[a])&&(t[a].src=t[a].getAttribute("data-src"));console.log(t)},isInsight:function(t){var a=t.getBoundingClientRect(),s=window.innerHeight;return a.top<=s+100}},watch:{passages:function(){var t=this;console.log("change"),this.$nextTick(function(){t.handleLoad()})}}},i={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"allArticle"},[s("div",{staticClass:"head"},[s("p",[t._v(t._s(t.type.name))]),t._v(" "),s("p",[t._v(t._s(t.type.describe))])]),t._v(" "),t._l(t.passages,function(a){return s("div",{staticClass:"article"},[s("div",{staticClass:"title"},[s("h1",[s("router-link",{attrs:{to:{name:"articles",params:{articleId:a.id}}}},[t._v(t._s(a.title))])],1),t._v(" "),s("div",{staticClass:"time"},[s("span",{staticClass:"iconfont icon-shijian"}),t._v(" "),s("span",[t._v(t._s(a.time))])])]),t._v(" "),s("div",{staticClass:"content"},[s("p",{domProps:{innerHTML:t._s(a.summary)}}),t._v(" "),s("span",[s("router-link",{attrs:{to:{name:"articles",params:{articleId:a.id}}}},[t._v("更多>>")])],1),t._v(" "),s("hr"),t._v(" "),s("div",{staticClass:"bottom"},[s("div",{staticClass:"bottomTag"},[s("span",{staticClass:"iconfont icon-tag1"}),t._v(" "),t._l(a.tags,function(a){return a?s("div",{key:a,staticClass:"tag",on:{click:function(s){return t.findTag(a)}}},[s("span",[t._v(t._s(a))])]):t._e()})],2),t._v(" "),s("div",{staticClass:"bottomType"},[s("span",{staticClass:"iconfont icon-wenjianjia"}),t._v(" "),s("span",[t._v(t._s(t.findCate(a.category)))])]),t._v(" "),s("div",{staticClass:"more"},[s("router-link",{attrs:{to:{name:"articles",params:{articleId:a.id}}}},[t._v("查看全文")])],1)])])])})],2)},staticRenderFns:[]};var o=s("VU/8")(n,i,!1,function(t){s("uirs")},"data-v-2c805ae7",null);a.a=o.exports},mAwG:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=s("XHq3"),n=s("yt7g"),i=s("OK1g"),o={name:"articleList",props:["categoryId"],data:function(){return{passages:[],type:{}}},components:{allArticle:e.a},mounted:function(){this.getArticle()},watch:{categoryId:function(){this.getArticle()}},methods:{getArticle:function(){var t=this;this.type=n.a.getCategoryById(this.categoryId),i.a.categoryArticleFront(this.type.id).then(function(a){switch(a.code){case"200":console.log("获取文章成功！"),t.passages=a.data,t.parseTags();break;case"400":console.log("服务器开小差了！")}},function(t){console.log(t)})},parseTags:function(){var t=/<img src/g;this.passages.forEach(function(a){a.tags=a.tags.split(","),a.summary=a.summary.replace(t,"<img data-src")})}}},r={render:function(){var t=this.$createElement;return(this._self._c||t)("all-article",{attrs:{passages:this.passages,type:this.type}})},staticRenderFns:[]};var c=s("VU/8")(o,r,!1,function(t){s("w3/e")},"data-v-28414904",null);a.default=c.exports},uirs:function(t,a){},"w3/e":function(t,a){}});