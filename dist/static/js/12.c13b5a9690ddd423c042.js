webpackJsonp([12],{"2uBX":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("OK1g"),i=(a("mtWM"),{name:"meAdmin",inject:["reload"],data:function(){return{name:"",imgsrc:"",signature:"",breif:""}},created:function(){this.getMyInfo()},methods:{activePreview:function(){this.$refs.uploadImg.click()},previewImg:function(){var e=this.$refs.uploadImg.files[0],t="",a=this;/^image\//.test(e.type)?window.FileReader?((t=new FileReader).readAsDataURL(e),t.onload=function(e){a.imgsrc=e.target.result}):alert("您的浏览器不支持图片预览功能，如需该功能请升级您的浏览器！"):alert("请选择图片！")},getMyInfo:function(){var e=this;n.a.getMyInfo().then(function(t){var a=t.data;switch(t.code){case"200":console.log(a),e.name=a.name,e.imgsrc=a.imgsrc,e.signature=a.signature,e.breif=a.breif,e.imgsrc||(e.imgsrc="/static/img/myImg.jpg");break;case"400":console.log("获取信息错误！"),e.imgsrc="/static/img/myImg.jpg"}},function(e){console.log(e)})},changeInfo:function(){var e=this;if(confirm("确定保存吗？")){var t=this.$refs.uploadImg.files[0],a=new FormData;a.append("file",t),a.append("name",this.name),a.append("signature",this.signature),a.append("breif",this.breif),console.log(a),n.a.changeMyInfo(a).then(function(t){switch(t.code){case"200":console.log(t),alert("信息修改成功"),e.reload();break;case"400":console.log("服务器开小差了，信息修改失败")}},function(e){console.log("信息修改失败")})}}}}),s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"me"},[a("div",{staticClass:"title"},[e._v("个人信息修改")]),e._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"myInfo"},[a("div",{staticClass:"myName"},[a("span",[e._v("我的名字：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{type:"text"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),a("br"),e._v(" "),a("span",[e._v("我的签名：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.signature,expression:"signature"}],attrs:{type:"text"},domProps:{value:e.signature},on:{input:function(t){t.target.composing||(e.signature=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"myHead"},[a("input",{ref:"uploadImg",attrs:{type:"file",accept:"image/png,image/gif,image/jpeg"},on:{change:e.previewImg}}),e._v(" "),a("img",{attrs:{src:e.imgsrc,alt:"我的头像"},on:{click:function(t){return t.stopPropagation(),e.activePreview(t)}}}),e._v(" "),a("p",[e._v("点击图片更改头像")])])]),e._v(" "),a("div",{staticClass:"myBrief"},[a("span",[e._v("我的简介：")]),e._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.breif,expression:"breif"}],domProps:{value:e.breif},on:{input:function(t){t.target.composing||(e.breif=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"save"},[a("button",{staticClass:"saveBtn",on:{click:e.changeInfo}},[e._v("提交")])])])])},staticRenderFns:[]};var r=a("VU/8")(i,s,!1,function(e){a("uneb")},"data-v-2ce323da",null);t.default=r.exports},uneb:function(e,t){}});