webpackJsonp([6],{IeFb:function(t,e){},Y8zt:function(t,e){},b0Rb:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("OK1g"),n={name:"allArticle",props:["categroyId","name","passages"],data:function(){return{publish:!0}},mounted:function(){},methods:{toggleState:function(t){var e=this,s="发表"==t.state?"草稿":"发表";1==confirm("确定将其设为 "+s+" 状态吗?")&&a.a.changeStateBack(t.id,s).then(function(a){switch(a.code){case"200":t.state=s,console.log(t.state),console.log(e.passages);break;case"400":alert("服务器开小差了！文章状态修改失败")}},function(t){console.log(t)})},goModify:function(t){t.id;this.$router.push({name:"modify",params:{id:t.id}})},goNew:function(){this.$router.push({name:"newArticle",params:{type:this.categroyId}})},delArticle:function(t,e){var s=this;if(1==confirm("确认删除该篇文章吗？")){var n=t.id;a.a.delArticleBack(n).then(function(t){switch(t.code){case"200":s.passages.splice("index",1),alert("删除成功！");break;case"400":alert("服务器开小差了，删除失败")}},function(t){console.log(t)})}}}},i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"allArticle"},[s("div",{staticClass:"head"},[t._v(t._s(t.name))]),t._v(" "),s("div",{staticClass:"content"},[s("button",{staticClass:"new",on:{click:t.goNew}},[t._v("\n            写新文章\n        ")]),t._v(" "),s("table",{attrs:{width:"100%"}},[t._m(0),t._v(" "),s("tbody",t._l(t.passages,function(e,a){return s("tr",{key:a},[s("td",[t._v(t._s(e.title))]),t._v(" "),s("td",[t._v(t._s(e.time))]),t._v(" "),s("td",t._l(e.tags,function(e,a){return s("span",{key:a,staticClass:"tag"},[t._v("#"+t._s(e)+" ")])}),0),t._v(" "),s("td",[s("button",{directives:[{name:"show",rawName:"v-show",value:"草稿"==e.state,expression:"passage.state=='草稿'"}],staticClass:"publish",on:{click:function(s){return t.toggleState(e)}}},[t._v("发布")]),t._v(" "),s("button",{directives:[{name:"show",rawName:"v-show",value:"发表"==e.state,expression:"passage.state=='发表'"}],staticClass:"save",on:{click:function(s){return t.toggleState(e)}}},[t._v("设为草稿")]),t._v(" "),s("button",{staticClass:"modify",on:{click:function(s){return t.goModify(e)}}},[t._v("修改")]),t._v(" "),s("button",{staticClass:"del",on:{click:function(s){return t.delArticle(e,a)}}},[t._v("删除")])])])}),0)])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("文章标题")]),this._v(" "),e("th",[this._v("发布时间")]),this._v(" "),e("th",[this._v("标签")]),this._v(" "),e("th",[this._v("操作")])])])}]};var c=s("VU/8")(n,i,!1,function(t){s("IeFb")},"data-v-ae13ddda",null).exports,o=s("yt7g"),r={name:"senseAdmin",components:{allArticle:c},props:["id"],data:function(){return{category:{id:1,name:"学无止境"},passages:[]}},created:function(){this.category=o.a.getCategoryById(this.id),this.getSenseArticle()},watch:{id:function(t){this.category=o.a.getCategoryById(this.id),this.getSenseArticle()}},methods:{getSenseArticle:function(){var t=this;encodeURIComponent(this.type);a.a.categoryArticleBack(this.category.id).then(function(e){switch(e.code){case"200":e.data.forEach(function(t){null!=t.tags&&(t.tags=t.tags.split(","))}),t.passages=e.data;break;case"400":console.log("获取数据错误！")}console.log(e)},function(t){console.log(t)})}}},l={render:function(){var t=this.$createElement;return(this._self._c||t)("all-article",{attrs:{passages:this.passages,categroyId:this.category.id,name:this.category.name}})},staticRenderFns:[]};var d=s("VU/8")(r,l,!1,function(t){s("Y8zt")},"data-v-5e0cf40c",null);e.default=d.exports}});